from datetime import datetime, timedelta

class Книга:
    def __init__(self, название, автор, год_издания):
        self.название = название
        self.автор = автор
        self.год_издания = год_издания

class Читатель:
    def __init__(self, имя, номер_читательского_билета):
        self.имя = имя
        self.номер_читательского_билета = номер_читательского_билета
        self.выданные_книги = {}

    def взять_книгу(self, книга, срок_выдачи):
        дата_возврата = datetime.now() + timedelta(days=срок_выдачи)
        self.выданные_книги[книга] = дата_возврата

    def вернуть_книгу(self, книга):
        if книга in self.выданные_книги:
            дата_возврата = self.выданные_книги.pop(книга)
            просрочка = max(0, (datetime.now() - дата_возврата).days)
            if просрочка > 0:
                штраф = просрочка * 10  # Пример: 10 рублей в день просрочки
                print(f"Книга '{книга.название}' возвращена с просрочкой в {просрочка} дней. Штраф: {штраф} рублей.")
        else:
            print(f"Книга '{книга.название}' не находится у читателя {self.имя}.")

class Библиотека:
    def __init__(self):
        self.список_книг = []
        self.список_читателей = []

    def добавить_книгу(self, книга):
        self.список_книг.append(книга)

    def добавить_читателя(self, читатель):
        self.список_читателей.append(читатель)

    def выдать_книгу(self, читатель, книга, срок_выдачи=14):
        if книга in self.список_книг and читатель in self.список_читателей:
            читатель.взять_книгу(книга, срок_выдачи)
            print(f"Книга '{книга.название}' выдана читателю {читатель.имя} на {срок_выдачи} дней.")
        else:
            print("Невозможно выдать книгу. Проверьте наличие книги и регистрацию читателя.")

    def принять_книгу(self, читатель, книга):
        читатель.вернуть_книгу(книга)
        print(f"Книга '{книга.название}' возвращена в библиотеку.")

    def поиск_по_автору(self, автор):
        return [книга for книга in self.список_книг if книга.автор == автор]

    def поиск_по_году_издания(self, год_издания):
        return [книга for книга in self.список_книг if книга.год_издания == год_издания]
